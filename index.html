<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
  <head>
    <meta charset="utf-8" />
  </head>
  <body style="height: 100%; margin: 0">
    <div id="container" style="height: 100%"></div>

    <script
      type="text/javascript"
      src="https://fastly.jsdelivr.net/npm/jquery"
    ></script>
    <script
      type="text/javascript"
      src="https://fastly.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.min.js"
    ></script>

    <script type="text/javascript">
      var dom = document.getElementById("container");
      var myChart = echarts.init(dom, null, {
        renderer: "canvas",
        useDirtyRect: false,
      });
      var app = {};
      var ROOT_PATH =
        "https://fastly.jsdelivr.net/gh/apache/echarts-website@asf-site/examples";
      var option;

      myChart.showLoading();
      $.get(
        "https://raw.githubusercontent.com/cygra/wikipedia_random_walk/master/data.json",
        function (graph) {
          graph = JSON.parse(graph);
          myChart.hideLoading();
          option = {
            series: [
              {
                name: "Wikipedia Random Walk",
                type: "graph",
                layout: "force",
                data: graph.nodes.map((it) => ({
                  id: it,
                  name: it,
                  symbolSize: Math.max(
                    (graph.links.filter(({ target }) => target === it).length /
                      graph.links.length) *
                      1000,
                    10
                  ),
                })),
                links: graph.links,
                roam: true,
                label: {
                  position: "right",
                },
                emphasis: {
                  focus: "adjacency",
                  label: {
                    position: "right",
                    show: true,
                  },
                },
                force: {
                  repulsion: 500,
                  initLayout: "circular",
                },
                edgeSymbol: ["", "arrow"],
                draggable: true,
              },
            ],
          };
          myChart.setOption(option);
        }
      );

      if (option && typeof option === "object") {
        myChart.setOption(option);
      }

      window.addEventListener("resize", myChart.resize);
    </script>
  </body>
</html>
